<!DOCTYPE html>
<html lang="de">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Hangar Planner - Aircraft Management</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<!-- PDF Export Library -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
		<script>
			// Robuste Tailwind-Konfiguration mit Fallback
			function configureTailwind() {
				if (typeof tailwind !== "undefined") {
					tailwind.config = {
						theme: {
							extend: {
								colors: {
									industrial: {
										dark: "#3A4354",
										medium: "#5D6B89",
										light: "#D1D5DB",
										accent: "#FF7043",
									},
									status: {
										green: "#22C55E",
										yellow: "#F59E0B",
										red: "#EF4444",
									},
								},
							},
						},
					};
					console.log("‚úÖ Tailwind konfiguriert");
				} else {
					console.log("‚ö†Ô∏è Tailwind nicht verf√ºgbar - verwende CSS-Variablen");
					// CSS-Variablen als Fallback setzen
					document.documentElement.style.setProperty(
						"--industrial-dark",
						"#3A4354"
					);
					document.documentElement.style.setProperty(
						"--industrial-medium",
						"#5D6B89"
					);
					document.documentElement.style.setProperty(
						"--industrial-accent",
						"#FF7043"
					);
				}
			}

			// Verwende zentrale Initialisierung statt separate DOMContentLoaded Events
			window.hangarInitQueue = window.hangarInitQueue || [];
			window.hangarInitQueue.push(function () {
				configureTailwind();
			});

			// Sofort-Konfiguration falls Tailwind bereits verf√ºgbar
			if (typeof tailwind !== "undefined") {
				configureTailwind();
			}
		</script>
		<link rel="stylesheet" href="css/hangarplanner-ui.css" />
		<link rel="stylesheet" href="css/dark-mode-zoom.css" />
		<link rel="stylesheet" href="css/weather-widget.css" />
		<link rel="stylesheet" href="css/info-widget.css" />
		<link rel="stylesheet" href="css/flight-data-status.css" />
		<!-- Neue separate CSS-Datei -->
		<style>
			.status-neutral {
				background-color: white;
				border: 1px solid #ccc;
			}

			.tow-neutral {
				background-color: white;
				color: #333333;
			}
		</style>
	</head>
	<body class="bg-industrial-dark text-white font-sans edit-mode">
		<div class="flex h-screen">
			<!-- Hauptbereich mit Hangar-Kacheln -->
			<div class="flex-grow flex flex-col content-container">
				<!-- Header mit Titel und Aktionen -->
				<header
					class="bg-white p-4 shadow-md flex justify-between items-center">
					<!-- Wetter-Widget mit verbessertem Layout -->
					<div class="flex-grow"></div>
					<div id="weather-widget">
						<div class="weather-primary">
							<div class="weather-airport">MUC</div>
							<div class="weather-data">
								<span id="weather-temp">12¬∞C</span>
								<div id="weather-icon">
									<svg
										class="w-5 h-5"
										xmlns="http://www.w3.org/2000/svg"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor">
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
									</svg>
								</div>
							</div>
						</div>
						<div class="weather-secondary">
							<span id="weather-wind" class="weather-wind-tooltip">
								<span class="weather-wind-icon" style="transform: rotate(0deg)"
									>‚Üí</span
								>
								S 9 km/h
							</span>
							<span id="weather-description" class="weather-description-text"
								>Clear</span
							>
							<span id="weather-visibility">Vis: 9.7km</span>
						</div>
					</div>

					<!-- Info-Widget mit Zeit-Anzeigen -->
					<div id="info-widget">
						<!-- Erste Zeile: Zeiten in einer Zeile -->
						<div class="time-display-row">
							<span class="time-label">Local:</span>
							<span id="local-time" class="time-value">19:17</span>
							<span class="time-label">UTC:</span>
							<span id="utc-time" class="time-value">17:17</span>
						</div>
						<!-- Zweite Zeile: Mode Display -->
						<div class="mode-display">
							<span class="mode-label">Mode:</span>
							<span id="sync-mode" class="sync-mode-value">Standalone</span>
						</div>
					</div>

					<div class="flex-grow flex justify-end">
						<!-- Vereinfachter Toggle-Button -->
						<button
							id="menuToggle"
							class="menu-toggle focus:outline-none bg-white text-industrial-accent px-2 py-1 rounded hover:bg-gray-50 z-50">
							¬ª
						</button>
					</div>
				</header>

				<!-- Hangar-Kacheln Bereich - Padding weiter reduziert -->
				<div class="flex-grow bg-white p-3 overflow-auto hangar-container">
					<!-- Abschnitt 1 Container -->
					<div class="section-container">
						<div id="hangarGrid" class="grid grid-cols-4 gap-4">
							<!-- 8 Hangar-Kacheln hier -->
							<!-- Kachel 1 - NEU GESTALTET -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="1"
												data-status="neutral"></span>
											<select
												id="status-1"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="1A"
												id="hangar-position-1"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<!-- Hauptbereich -->
								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-1"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<!-- Einheitliche Ausrichtung f√ºr Infos -->
									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-1"
											class="info-input"
											title="Time" />

										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-1"
											class="info-input"
											title="Time" />

										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-1"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />

										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-1" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizen mit einer Zeile -->
									<div class="notes-container">
										<textarea
											id="notes-1"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 2 mit neuem Layout -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="2"
												data-status="neutral"></span>
											<select
												id="status-2"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="1B"
												id="hangar-position-2"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-2"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<!-- Einheitliche Ausrichtung f√ºr Infos -->
									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-2"
											class="info-input"
											title="Time" />

										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-2"
											class="info-input"
											title="Time" />

										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-2"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />

										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-2" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizen mit einer Zeile -->
									<div class="notes-container">
										<textarea
											id="notes-2"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 3 mit neuem Layout -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="3"
												data-status="neutral"></span>
											<select
												id="status-3"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="2A"
												id="hangar-position-3"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-3"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<!-- Einheitliche Ausrichtung f√ºr Infos -->
									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-3"
											class="info-input"
											title="Time" />

										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-3"
											class="info-input"
											title="Time" />

										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-3"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />

										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-3" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizen mit einer Zeile -->
									<div class="notes-container">
										<textarea
											id="notes-3"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 4 mit neuem Layout + Notizfeld -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="4"
												data-status="neutral"></span>
											<select
												id="status-4"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="2B"
												id="hangar-position-4"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-4"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<!-- Einheitliche Ausrichtung f√ºr Infos -->
									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-4"
											class="info-input"
											title="Time" />

										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-4"
											class="info-input"
											title="Time" />

										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-4"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />

										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-4" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizen mit einer Zeile -->
									<div class="notes-container">
										<textarea
											id="notes-4"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 5-8 mit dem gleichen optimierten Layout -->
							<!-- Kachel 5 -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="5"
												data-status="neutral"></span>
											<select
												id="status-5"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="2C"
												id="hangar-position-5"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<!-- Hauptbereich mit Infos und Notizfeld -->
								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-5"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-5"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-5"
											class="info-input"
											title="Time" />
										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-5"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />
										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-5" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizfeld einzeilig -->
									<div class="notes-container">
										<textarea
											id="notes-5"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 6 mit neuem Design -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="6"
												data-status="neutral"></span>
											<select
												id="status-6"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="3A"
												id="hangar-position-6"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<!-- Hauptbereich -->
								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-6"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-6"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-6"
											class="info-input"
											title="Time" />
										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-6"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />
										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-6" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizen einzeilig -->
									<div class="notes-container">
										<textarea
											id="notes-6"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 7 mit neuem Design -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="7"
												data-status="neutral"></span>
											<select
												id="status-7"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="3B"
												id="hangar-position-7"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<!-- Hauptbereich -->
								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-7"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-7"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-7"
											class="info-input"
											title="Time" />
										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-7"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />

										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-7" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizen einzeilig -->
									<div class="notes-container">
										<textarea
											id="notes-7"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 8 mit neuem Design -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="8"
												data-status="neutral"></span>
											<select
												id="status-8"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="4A"
												id="hangar-position-8"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<!-- Hauptbereich -->
								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-8"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-8"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-8"
											class="info-input"
											title="Time" />
										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-8"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />
										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-8" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<!-- Notizen einzeilig -->
									<div class="notes-container">
										<textarea
											id="notes-8"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 9 -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="9"
												data-status="neutral"></span>
											<select
												id="status-9"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="3A"
												id="hangar-position-9"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-9"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-9"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-9"
											class="info-input"
											title="Time" />
										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-9"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />
										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-9" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<div class="notes-container">
										<textarea
											id="notes-9"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 10 -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="10"
												data-status="neutral"></span>
											<select
												id="status-10"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="3B"
												id="hangar-position-10"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-10"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-10"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-10"
											class="info-input"
											title="Time" />
										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-10"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />
										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-10" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<div class="notes-container">
										<textarea
											id="notes-10"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 11 -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="11"
												data-status="neutral"></span>
											<select
												id="status-11"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="3C"
												id="hangar-position-11"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-11"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-11"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-11"
											class="info-input"
											title="Time" />

										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-11"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />

										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-11" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<div class="notes-container">
										<textarea
											id="notes-11"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>

							<!-- Kachel 12 -->
							<div
								class="hangar-cell bg-white rounded-lg shadow-md flex flex-col">
								<!-- Header mit Statuslicht und Status-Dropdown -->
								<div class="card-header">
									<div class="header-elements">
										<!-- Statuslicht und Dropdown -->
										<div class="status-dropdown-container">
											<span
												class="status-light status-neutral"
												data-cell="12"
												data-status="neutral"></span>
											<select
												id="status-12"
												class="status-selector"
												title="Aircraft Status">
												<option value="neutral" selected></option>
												<option value="ready">Ready</option>
												<option value="maintenance">MX</option>
												<option value="aog">AOG</option>
											</select>
										</div>

										<!-- Position -->
										<div class="position-container">
											<input
												type="text"
												placeholder="3D"
												id="hangar-position-12"
												class="position-input"
												title="Hangar Position" />
										</div>
									</div>
								</div>

								<div class="p-4 flex-grow flex flex-col">
									<input
										type="text"
										id="aircraft-12"
										placeholder="Aircraft ID"
										class="aircraft-id" />

									<div class="info-grid mb-3">
										<div class="info-label">Arr:</div>
										<input
											type="time"
											id="arrival-time-12"
											class="info-input"
											title="Time" />
										<div class="info-label">Dep:</div>
										<input
											type="time"
											id="departure-time-12"
											class="info-input"
											title="Time" />

										<div class="info-label">Pos:</div>
										<input
											type="text"
											id="position-12"
											class="info-input"
											placeholder="--"
											maxlength="10"
											title="Aircraft position" />

										<div class="info-label">Tow:</div>
										<div class="tow-status-container">
											<select id="tow-status-12" class="tow-status-selector">
												<option value="neutral" selected></option>
												<option value="initiated" class="tow-initiated">
													Initiated
												</option>
												<option value="ongoing" class="tow-ongoing">
													In Progress
												</option>
												<option value="on-position" class="tow-on-position">
													On Position
												</option>
											</select>
										</div>
									</div>

									<div class="notes-container">
										<textarea
											id="notes-12"
											placeholder="Enter notes..."
											class="notes-textarea"></textarea>
									</div>
								</div>
							</div>
							<!-- Kachel 12 schlie√üender div-Tag hinzugef√ºgt -->
						</div>
					</div>

					<!-- Horizontale Trennlinie mit gleichm√§√üigem Abstand -->
					<div class="section-divider"></div>

					<!-- Abschnitt 2 Container -->
					<div class="section-container">
						<div id="secondaryHangarGrid" class="grid grid-cols-4 gap-4">
							<!-- Hier werden dynamisch weitere Kacheln eingef√ºgt -->
						</div>
					</div>

					<!-- Horizontale Trennlinie f√ºr Timetable -->
					<div class="section-divider"></div>

					<!-- Timetable Sektion -->
					<div class="section-container">
						<div class="timetable-header mb-4">
							<h2 class="text-2xl font-bold text-white mb-2">
								<svg
									class="inline-block w-6 h-6 mr-2"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24">
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
								</svg>
								Timetable
							</h2>
							<p class="text-gray-300 text-sm">
								Chronologische √úbersicht aller Flugzeuge mit √úbernachtungen
							</p>
						</div>

						<div
							class="timetable-container bg-white rounded-lg shadow-lg overflow-hidden">
							<!-- Timetable Toolbar -->
							<div
								class="timetable-toolbar bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center">
								<div class="flex items-center space-x-4">
									<div class="flex items-center space-x-2">
										<svg
											class="w-4 h-4 text-gray-500"
											fill="none"
											stroke="currentColor"
											viewBox="0 0 24 24">
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="2"
												d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"></path>
										</svg>
										<span class="text-sm text-gray-600">Filter:</span>
										<select
											id="timetableFilter"
											class="text-sm border border-gray-300 rounded px-2 py-1">
											<option value="all">Alle Flugzeuge</option>
											<option value="overnight">Nur √úbernachtungen</option>
											<option value="active">Nur aktive</option>
										</select>
									</div>
									<div class="flex items-center space-x-2">
										<svg
											class="w-4 h-4 text-gray-500"
											fill="none"
											stroke="currentColor"
											viewBox="0 0 24 24">
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="2"
												d="M4 6h16M4 12h16M4 18h16"></path>
										</svg>
										<span class="text-sm text-gray-600">Sortierung:</span>
										<select
											id="timetableSort"
											class="text-sm border border-gray-300 rounded px-2 py-1">
											<option value="arrival">Ankunftszeit</option>
											<option value="departure">Abflugzeit</option>
											<option value="aircraft">Aircraft ID</option>
											<option value="position">Position</option>
										</select>
									</div>
								</div>
								<div class="flex items-center space-x-2">
									<span id="timetableCount" class="text-sm text-gray-600"
										>0 Eintr√§ge</span
									>
									<button
										id="refreshTimetable"
										class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm flex items-center">
										<svg
											class="w-4 h-4 mr-1"
											fill="none"
											stroke="currentColor"
											viewBox="0 0 24 24">
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="2"
												d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
										</svg>
										Aktualisieren
									</button>
								</div>
							</div>

							<!-- Timetable Tabelle -->
							<div
								class="timetable-scroll-container"
								style="max-height: 400px; overflow-y: auto">
								<table id="timetableTable" class="w-full">
									<thead class="bg-gray-100 sticky top-0">
										<tr>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20">
												Position
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32">
												Aircraft ID
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24">
												Status
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20">
												Von
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20">
												Nach
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24">
												Ankunft
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24">
												Abflug
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-40">
												Route
											</th>
											<th
												class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32">
												Notizen
											</th>
										</tr>
									</thead>
									<tbody
										id="timetableBody"
										class="bg-white divide-y divide-gray-200">
										<!-- Timetable Eintr√§ge werden hier dynamisch eingef√ºgt -->
									</tbody>
								</table>
							</div>

							<!-- Timetable Leer-Status -->
							<div
								id="timetableEmpty"
								class="hidden p-8 text-center text-gray-500">
								<svg
									class="mx-auto h-12 w-12 text-gray-400 mb-4"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24">
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
								</svg>
								<p class="text-lg font-medium mb-2">
									Keine Flugdaten verf√ºgbar
								</p>
								<p class="text-sm">
									Laden Sie Flugdaten in die Kacheln, um die Timetable zu f√ºllen
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Einklappbares Rechtes Men√º -->
			<div
				id="sidebarMenu"
				class="sidebar-container bg-industrial-medium flex flex-col">
				<!-- Hauptinhalt der Sidebar -->
				<div class="sidebar-content">
					<!-- Ansichtsverwaltung als eigene Sektion -->
					<div class="sidebar-accordion-item">
						<div
							class="sidebar-accordion-header"
							onclick="toggleAccordion(this)">
							<div class="sidebar-header-content">
								<i class="sidebar-icon">‚öôÔ∏è</i>
								<h3 class="sidebar-section-title">Project Settings</h3>
							</div>
							<i class="dropdown-arrow">‚ñº</i>
						</div>
						<div class="sidebar-accordion-content">
							<!-- Mode Toggle Switch -->
							<div class="sidebar-form-group">
								<div class="sidebar-form-row">
									<label for="modeToggle">View/Edit Mode:</label>
									<div class="input-container">
										<div class="mode-toggle">
											<span class="mode-toggle-label text-xs">View</span>
											<label class="toggle-switch">
												<input type="checkbox" id="modeToggle" checked />
												<span class="toggle-slider"></span>
											</label>
											<span class="mode-toggle-label text-xs">Edit</span>
										</div>
									</div>
								</div>
							</div>

							<!-- Project Name -->
							<div class="sidebar-form-group">
								<label for="projectName">Project Name:</label>
								<input
									id="projectName"
									type="text"
									placeholder="Project Name"
									class="sidebar-form-control" />
								<input type="hidden" id="projectId" value="" />
							</div>

							<!-- Save/Load Buttons -->
							<div class="sidebar-input-group">
								<button
									id="saveBtn"
									class="sidebar-btn sidebar-btn-primary flex-1">
									Save
								</button>
								<button
									id="loadBtn"
									class="sidebar-btn sidebar-btn-secondary flex-1">
									Load
								</button>
							</div>
						</div>
					</div>

					<!-- Synchronization Section -->
					<div class="sidebar-accordion-item">
						<div
							class="sidebar-accordion-header"
							onclick="toggleAccordion(this)">
							<div class="sidebar-header-content">
								<i class="sidebar-icon">üîÑ</i>
								<h3 class="sidebar-section-title">Synchronisation</h3>
							</div>
							<i class="dropdown-arrow">‚ñº</i>
						</div>
						<div class="sidebar-accordion-content">
							<!-- Modern Sync Toggles Interface -->
							<div class="sidebar-form-group">
								<!-- Sync Description -->
								<div class="sidebar-form-group">
									<div class="sync-mode-description">
										Configure how your data syncs with the server
									</div>
								</div>

								<!-- Read Data Toggle -->
								<div class="sidebar-form-group">
									<div class="sidebar-form-row">
										<label class="sidebar-option-label">
											<span class="sidebar-option-title">Read Data</span>
											<span class="sidebar-option-desc"
												>Receive updates from server</span
											>
										</label>
										<div class="input-container">
											<label class="toggle-switch">
												<input type="checkbox" id="readDataToggle" />
												<span class="toggle-slider"></span>
											</label>
										</div>
									</div>
								</div>

								<!-- Write Data Toggle -->
								<div class="sidebar-form-group">
									<div class="sidebar-form-row">
										<label class="sidebar-option-label">
											<span class="sidebar-option-title">Write Data</span>
											<span class="sidebar-option-desc"
												>Send changes to server (Master mode)</span
											>
										</label>
										<div class="input-container">
											<label class="toggle-switch">
												<input type="checkbox" id="writeDataToggle" />
												<span class="toggle-slider"></span>
											</label>
										</div>
									</div>
								</div>

								<!-- Current Mode Display (einzige Status-Anzeige) -->
								<div class="sidebar-form-group">
									<div class="sync-status-display">
										<span class="sync-status-label">Current Mode:</span>
										<span
											id="currentSyncMode"
											class="sync-mode-badge standalone"
											>Standalone</span
										>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Display Options Sektion -->
					<div class="sidebar-accordion-item">
						<div
							class="sidebar-accordion-header"
							onclick="toggleAccordion(this)">
							<div class="sidebar-header-content">
								<i class="sidebar-icon">üî≥</i>
								<h3 class="sidebar-section-title">Display Options</h3>
							</div>
							<i class="dropdown-arrow">‚ñº</i>
						</div>
						<div class="sidebar-accordion-content">
							<div class="sidebar-form-group">
								<label for="tilesCount">Primary Tiles:</label>
								<div class="sidebar-input-group">
									<input
										type="number"
										id="tilesCount"
										min="1"
										max="12"
										value="8"
										class="sidebar-form-control" />
									<button
										id="updateTilesBtn"
										class="sidebar-btn sidebar-btn-primary">
										Update
									</button>
								</div>
							</div>

							<div class="sidebar-form-group">
								<label for="secondaryTilesCount">Secondary Tiles:</label>
								<div class="sidebar-input-group">
									<input
										type="number"
										id="secondaryTilesCount"
										min="0"
										max="12"
										value="4"
										class="sidebar-form-control" />
									<button
										id="updateSecondaryTilesBtn"
										class="sidebar-btn sidebar-btn-primary">
										Update
									</button>
								</div>
							</div>

							<div class="sidebar-form-group">
								<label for="layoutType">Layout:</label>
								<select id="layoutType" class="sidebar-form-select">
									<option value="1">1 Column</option>
									<option value="2">2 Columns</option>
									<option value="3">3 Columns</option>
									<option value="4" selected>4 Columns</option>
								</select>
							</div>

							<!-- Dark Mode Toggle -->
							<div class="sidebar-form-group">
								<div class="sidebar-form-row">
									<label for="darkModeToggle">Dark Mode:</label>
									<div class="input-container">
										<div class="mode-toggle">
											<span class="mode-toggle-label text-xs">Light</span>
											<label class="toggle-switch">
												<input type="checkbox" id="darkModeToggle" />
												<span class="toggle-slider"></span>
											</label>
											<span class="mode-toggle-label text-xs">Dark</span>
										</div>
									</div>
								</div>
							</div>

							<!-- NEU: Ansichtsmodus Toggle (Kachel/Tabelle) -->
							<div class="sidebar-form-group">
								<div class="sidebar-form-row">
									<label for="viewModeToggle">Ansicht:</label>
									<div class="input-container">
										<div class="mode-toggle">
											<span class="mode-toggle-label text-xs">Kachel</span>
											<label class="toggle-switch">
												<input type="checkbox" id="viewModeToggle" />
												<span class="toggle-slider"></span>
											</label>
											<span class="mode-toggle-label text-xs">Tabelle</span>
										</div>
									</div>
								</div>
							</div>

							<!-- Display Zoom Slider -->
							<div class="sidebar-form-group">
								<label for="displayZoom"
									>Display Zoom: <span id="zoomValue">100%</span></label
								>
								<input
									type="range"
									id="displayZoom"
									min="75"
									max="150"
									step="5"
									value="100"
									class="sidebar-form-control w-full" />
							</div>
						</div>
					</div>

					<!-- Suche nach Flugzeugen -->
					<div class="sidebar-accordion-item">
						<div
							class="sidebar-accordion-header"
							onclick="toggleAccordion(this)">
							<div class="sidebar-header-content">
								<i class="sidebar-icon">üîç</i>
								<h3 class="sidebar-section-title">Search Aircraft</h3>
							</div>
							<i class="dropdown-arrow">‚ñº</i>
						</div>
						<div class="sidebar-accordion-content">
							<div class="sidebar-input-group">
								<input
									type="text"
									id="searchAircraft"
									placeholder="Flugzeug-ID (z.B. D-AIZZ, N12345)"
									class="sidebar-form-control"
									title="Geben Sie eine g√ºltige Flugzeugkennung ein, z.B. D-AIZZ oder N12345" />
								<button id="btnSearch" class="sidebar-btn sidebar-btn-primary">
									Search
								</button>
							</div>
						</div>
					</div>

					<!-- Flugdaten abrufen -->
					<div class="sidebar-accordion-item">
						<div
							class="sidebar-accordion-header"
							onclick="toggleAccordion(this)">
							<div class="sidebar-header-content">
								<i class="sidebar-icon">‚úàÔ∏è</i>
								<h3 class="sidebar-section-title">Flight Data</h3>
							</div>
							<i class="dropdown-arrow">‚ñº</i>
						</div>
						<div id="flightDataContent" class="sidebar-accordion-content">
							<div class="sidebar-form-group">
								<label for="currentDateInput">Tag (letzter Flug):</label>
								<input
									type="date"
									id="currentDateInput"
									class="sidebar-form-control" />
							</div>
							<div class="sidebar-form-group">
								<label for="nextDateInput">Tag (erster Flug):</label>
								<input
									type="date"
									id="nextDateInput"
									class="sidebar-form-control" />
							</div>

							<!-- IATA-Code Eingabefeld -->
							<div class="sidebar-form-group">
								<label for="airportCodeInput">Flughafen (IATA-Code):</label>
								<input
									type="text"
									id="airportCodeInput"
									name="airportCode"
									placeholder="z.B. FRA, MUC"
									maxlength="3"
									value="MUC"
									style="text-transform: uppercase"
									class="sidebar-form-control" />
								<p class="mt-1 text-xs text-gray-400">
									Geben Sie einen IATA-Flughafencode ein, um die Suche zu
									verfeinern.
								</p>
							</div>

							<!-- API-Provider Auswahl -->
							<div class="sidebar-form-group">
								<label for="apiProviderSelect">API-Provider:</label>
								<select id="apiProviderSelect" class="sidebar-form-select">
									<option value="aerodatabox">AeroDataBox API</option>
									<option value="apimarket">API Market</option>
								</select>
								<p class="mt-1 text-xs text-gray-400">
									W√§hlen Sie zwischen AeroDataBox (via RapidAPI) oder API
									Market.
								</p>
							</div>

							<button
								id="fetchFlightData"
								class="sidebar-btn sidebar-btn-primary w-full">
								Update Data
							</button>

							<!-- Neuer Button f√ºr Airport Flights -->
							<button
								id="showAirportFlightsBtn"
								class="sidebar-btn sidebar-btn-secondary w-full mt-2">
								Show Airport Flights
							</button>

							<!-- Test Button f√ºr showNotification -->
							<button
								id="testNotificationDisplay"
								class="sidebar-btn sidebar-btn-secondary w-full mt-2"
								onclick="if(window.showNotification) window.showNotification('Test: Verarbeite D-AIBN - API-Anfrage l√§uft...', 'info');">
								Test Notification
							</button>

							<div id="fetchStatus" class="text-sm text-center"></div>
							Ready to retrieve flight data
						</div>
					</div>

					<!-- PDF Export Funktion -->
					<div class="sidebar-accordion-item">
						<div
							class="sidebar-accordion-header"
							onclick="toggleAccordion(this)">
							<div class="sidebar-header-content">
								<i class="sidebar-icon">üìÑ</i>
								<h3 class="sidebar-section-title">Export Plan</h3>
							</div>
							<i class="dropdown-arrow">‚ñº</i>
						</div>
						<div class="sidebar-accordion-content">
							<div class="sidebar-form-group">
								<label for="pdfFilename">File name:</label>
								<input
									type="text"
									id="pdfFilename"
									value="Hangar_Plan"
									class="sidebar-form-control" />
							</div>

							<div class="sidebar-form-group">
								<div class="flex items-center">
									<input
										type="checkbox"
										id="landscapeMode"
										checked
										class="mr-2" />
									<label for="landscapeMode">Landscape Mode</label>
								</div>
							</div>

							<!-- Field Selection Section -->
							<div class="sidebar-form-group">
								<label class="sidebar-section-subtitle">Export Fields:</label>
								<div style="margin-left: 10px">
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportAircraft"
											checked
											class="mr-2" />
										<label for="exportAircraft">Aircraft ID (AC-ID)</label>
									</div>
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportArrival"
											checked
											class="mr-2" />
										<label for="exportArrival">Arrival Time (Arr)</label>
									</div>
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportDeparture"
											checked
											class="mr-2" />
										<label for="exportDeparture">Departure Time (Dep)</label>
									</div>
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportPosition"
											checked
											class="mr-2" />
										<label for="exportPosition">Position/Route (Pos)</label>
									</div>
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportHangarPosition"
											checked
											class="mr-2" />
										<label for="exportHangarPosition">Hangar Position</label>
									</div>
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportStatus"
											checked
											class="mr-2" />
										<label for="exportStatus">Status</label>
									</div>
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportTowStatus"
											checked
											class="mr-2" />
										<label for="exportTowStatus">Tow Status</label>
									</div>
									<div class="flex items-center" style="margin-bottom: 5px">
										<input
											type="checkbox"
											id="exportNotes"
											checked
											class="mr-2" />
										<label for="exportNotes">Notes</label>
									</div>
								</div>
							</div>

							<button
								id="exportPdfBtn"
								class="sidebar-btn sidebar-btn-primary w-full">
								Export PDF
							</button>
						</div>
					</div>
				</div>

				<!-- Versteckte File-Input-Elemente -->
				<input type="file" id="jsonFileInput" accept=".json" class="hidden" />
				<input
					type="file"
					id="settingsFileInput"
					accept=".json"
					class="hidden" />
			</div>

			<!-- Modales Fenster f√ºr Laden -->
			<div
				id="loadModal"
				class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
				<div class="bg-industrial-medium rounded-lg p-6 w-96 max-w-full">
					<h2 class="text-xl font-bold mb-4">Load Hangar Plan</h2>
					<div class="mb-4">
						<input
							id="loadProjectName"
							type="text"
							placeholder="Enter Project Name"
							class="w-full bg-industrial-dark text-white px-3 py-2 rounded form-control" />
					</div>
					<div class="flex justify-end space-x-3">
						<button
							id="cancelLoad"
							class="px-4 py-2 bg-industrial-light text-industrial-dark rounded">
							Cancel
						</button>
						<button
							id="confirmLoad"
							class="px-4 py-2 bg-industrial-accent rounded">
							Load
						</button>
					</div>
				</div>
			</div>

			<!-- E-Mail-Erfolgsmeldung Modal -->
			<div
				id="emailSentModal"
				class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
				<div class="bg-industrial-medium rounded-lg p-6 w-96 max-w-full">
					<h2 class="text-xl font-bold mb-4">Email Sent</h2>
					<p class="mb-4">Your hangar plan has been sent successfully.</p>
					<div class="flex justify-end">
						<button
							id="emailOkBtn"
							class="px-4 py-2 bg-industrial-accent rounded">
							OK
						</button>
					</div>
				</div>
			</div>

			<!-- JavaScript-Dateien -->
			<script src="js/helpers.js"></script>
			<script src="js/global-initialization.js"></script>
			<script src="js/fileManager.js"></script>
			<script src="js/weather-api.js"></script>
			<script src="js/improved-event-manager.js"></script>
			<script src="js/hangar-ui.js"></script>
			<script src="js/hangar-data.js"></script>
			<script src="js/dynamic-api-loader.js"></script>
			<script src="js/aerodatabox-api.js"></script>
			<script src="js/airport-flights.js"></script>
			<script src="js/api-facade.js"></script>
			<script src="js/hangar-events.js"></script>
			<script src="js/hangar-pdf.js"></script>
			<script src="js/hangar.js"></script>
			<script src="js/storage-browser.js"></script>
			<script src="js/sharing-manager.js"></script>

			<!-- Timetable API Integration - NACH AeroDataBox API laden -->
			<script src="js/timetable-api-integration.js"></script>

			<!-- Einfache Accordion-Funktion ohne Event-Listener -->
			<script>
				// Direkte Accordion-Toggle-Funktion (keep it simple)
				function toggleAccordion(header) {
					const content = header.nextElementSibling;
					const arrow = header.querySelector(".dropdown-arrow");

					if (
						content &&
						content.classList.contains("sidebar-accordion-content")
					) {
						// Toggle open/close
						if (content.classList.contains("open")) {
							content.classList.remove("open");
							if (arrow) arrow.textContent = "‚ñº";
						} else {
							content.classList.add("open");
							if (arrow) arrow.textContent = "‚ñ≤";
						}
					}
				}
			</script>

			<!-- Event-Handler f√ºr den "Info anzeigen"-Button -->
			<script>
				// Verwende zentrale Initialisierung statt separate DOMContentLoaded Events
				window.hangarInitQueue = window.hangarInitQueue || [];
				window.hangarInitQueue.push(function () {
					// Event-Handler f√ºr den Ordnerstruktur-Info-Button
					const showFolderInfoBtn =
						document.getElementById("showFolderInfoBtn");
					if (showFolderInfoBtn) {
						showFolderInfoBtn.addEventListener("click", function () {
							// Diese Funktion wird in folderManager.js definiert
							if (typeof window.folderManager !== "undefined") {
								window.folderManager.showFolderStructureInfo();
							} else {
								// Fallback, falls die Funktion nicht verf√ºgbar ist
								alert(
									"Empfohlene Ordnerstruktur: HangarPlanner/Projekte/ f√ºr Projekte und HangarPlanner/Einstellungen/ f√ºr Einstellungen"
								);
							}
						});
					}

					// Initialisierung der UI, wenn Funktionen verf√ºgbar sind
					if (typeof initializeUI === "function") {
						initializeUI();
					}

					if (typeof setupUIEventListeners === "function") {
						setupUIEventListeners();
					}
				});
			</script>

			<!-- Event-Handler f√ºr die neue Statusdarstellung -->
			<script>
				// Globale Funktion zum Aktualisieren des Statuslichts (f√ºr alle Kacheln)
				function updateStatusLight(select) {
					const cellId = select.id.split("-")[1];
					const statusValue = select.value;

					// Suche Status-Licht in prim√§ren ODER sekund√§ren Kacheln
					let statusLight = document.querySelector(
						`.status-light[data-cell="${cellId}"]`
					);

					// Fallback: Suche in der n√§chsten Container-Hierarchie
					if (!statusLight) {
						const container = select.closest(".hangar-cell");
						if (container) {
							statusLight = container.querySelector(".status-light");
						}
					}

					if (statusLight) {
						// CSS-basierte L√∂sung: Nur data-status Attribut setzen
						statusLight.setAttribute("data-status", statusValue);
						statusLight.setAttribute("data-cell", cellId);

						// Legacy CSS-Klassen entfernen (f√ºr alte Browser)
						statusLight.classList.remove(
							"status-ready",
							"status-maintenance",
							"status-aog",
							"status-neutral"
						);
						// Neue CSS-Klasse hinzuf√ºgen (Fallback)
						statusLight.classList.add(`status-${statusValue}`);

						// console.log(`‚úÖ Status-Licht f√ºr Kachel ${cellId} auf ${statusValue} gesetzt`);
					} else {
						console.warn(`‚ùå Status-Licht f√ºr Kachel ${cellId} nicht gefunden`);
					}
				}

				// Globale Funktion zum Aktualisieren ALLER Status-Lichter
				function updateAllStatusLights() {
					// console.log('üîÑ Aktualisiere alle Status-Lichter...');
					const allStatusSelectors =
						document.querySelectorAll(".status-selector");
					let updated = 0;

					allStatusSelectors.forEach((select) => {
						if (select.value && select.value !== "neutral") {
							updateStatusLight(select);
							updated++;
						}
					});

					// console.log(`‚úÖ ${updated} Status-Lichter aktualisiert`);
					return updated;
				}

				// NEUE FUNKTION: Aktualisiert Status-Lichter f√ºr alle Kacheln (auch leere)
				function updateAllStatusLightsForced() {
					console.log("üîÑ Erzwinge Update aller Status-Lichter...");
					const allStatusSelectors =
						document.querySelectorAll(".status-selector");
					let updated = 0;

					allStatusSelectors.forEach((select) => {
						// Aktualisiere ALLE Status-Lichter, auch die mit "neutral" Wert
						updateStatusLight(select);
						updated++;
					});

					console.log(`‚úÖ ${updated} Status-Lichter erzwungen aktualisiert`);
					return updated;
				}

				// Globale Funktion zum Aktualisieren eines spezifischen Status-Lichts nach Kachel-ID
				function updateStatusLightByCellId(cellId) {
					const statusSelect = document.getElementById(`status-${cellId}`);
					if (statusSelect) {
						updateStatusLight(statusSelect);
						return true;
					}
					return false;
				}

				// Verwende zentrale Initialisierung statt separate DOMContentLoaded Events
				window.hangarInitQueue = window.hangarInitQueue || [];

				// Mache Funktionen global verf√ºgbar
				window.updateAllStatusLights = updateAllStatusLights;
				window.updateAllStatusLightsForced = updateAllStatusLightsForced;
				window.updateStatusLightByCellId = updateStatusLightByCellId;

				window.hangarInitQueue.push(function () {
					// Status-Dropdown-Handler f√ºr ALLE Kacheln (prim√§re UND sekund√§re)
					function setupStatusHandlers() {
						document.querySelectorAll(".status-selector").forEach((select) => {
							// Pr√ºfe ob Event-Listener bereits hinzugef√ºgt wurde
							if (!select.hasAttribute("data-status-listener-added")) {
								// Initial Status setzen
								updateStatusLight(select);

								// Event-Listener f√ºr √Ñnderungen
								select.addEventListener("change", function () {
									updateStatusLight(this);
								});

								// Markiere als verarbeitet
								select.setAttribute("data-status-listener-added", "true");
							}
						});
					}

					// Initial alle Status-Handler einrichten
					setupStatusHandlers();

					// Event-Listener f√ºr dynamisch erstellte sekund√§re Kacheln
					document.addEventListener("secondaryTilesCreated", function (event) {
						// console.log('üéØ Sekund√§re Kacheln erstellt, richte Status-Handler ein...');
						setTimeout(() => {
							setupStatusHandlers();
							// Erzwinge Update der Status-Lichter f√ºr sekund√§re Kacheln
							updateAllStatusLightsForced();
						}, 100); // Kurze Verz√∂gerung f√ºr DOM-Update
					});

					// Event-Listener f√ºr Daten-Updates (nach dem Laden von gespeicherten Daten)
					document.addEventListener("dataLoaded", function (event) {
						// console.log('üìä Daten geladen, aktualisiere alle Status-Lichter...');
						setTimeout(() => {
							updateAllStatusLightsForced(); // Erzwinge Update ALLER Lichter
						}, 200); // Verz√∂gerung f√ºr DOM-Updates
					});
				});
			</script>

			<!-- Notizfelder in allen Kacheln auf Englisch √§ndern mit direktem DOM-Skript -->
			<script>
				// Verwende zentrale Initialisierung statt separate DOMContentLoaded Events
				window.hangarInitQueue = window.hangarInitQueue || [];
				window.hangarInitQueue.push(function () {
					// Alle Notizfelder auf Englisch umstellen
					document.querySelectorAll(".notes-textarea").forEach((textarea) => {
						if (
							textarea.getAttribute("placeholder") === "Notizen eingeben..." ||
							!textarea.getAttribute("placeholder")
						) {
							textarea.setAttribute("placeholder", "Enter notes...");
						}
					});

					// Status-Dropdowns Hintergrundfarbe forcieren
					document.querySelectorAll(".status-selector").forEach((select) => {
						select.style.backgroundColor = "#e6eaef";
					});
				});
			</script>

			<!-- Robustheitsskript f√ºr dynamisch erzeugte Elemente -->
			<script>
				// Zentrale Funktionen f√ºr UI-Updates
				function updateTextareasAndSelects() {
					// Alle Notizfelder auf Englisch umstellen
					document.querySelectorAll(".notes-textarea").forEach((textarea) => {
						if (
							textarea.getAttribute("placeholder") === "Notizen eingeben..." ||
							!textarea.getAttribute("placeholder")
						) {
							textarea.setAttribute("placeholder", "Enter notes...");
						}
					});

					// Status-Dropdowns Hintergrundfarbe forcieren
					document.querySelectorAll(".status-selector").forEach((select) => {
						select.style.backgroundColor = "#e6eaef";

						// Event-Listener f√ºr neue Status-Selektoren hinzuf√ºgen, falls noch nicht vorhanden
						if (!select.hasAttribute("data-listener-added")) {
							select.addEventListener("change", function () {
								updateStatusLight(this);
							});
							select.setAttribute("data-listener-added", "true");
							// Initial Status setzen
							updateStatusLight(select);
						}
					});
				}

				// Verwende zentrale Initialisierung
				window.hangarInitQueue = window.hangarInitQueue || [];
				window.hangarInitQueue.push(function () {
					// Sofort ausf√ºhren
					updateTextareasAndSelects();

					// Dann nochmal mit Verz√∂gerungen
					setTimeout(updateTextareasAndSelects, 500);
					setTimeout(updateTextareasAndSelects, 1500);

					// Auch bei UI-√Ñnderungen erneut ausf√ºhren
					document.addEventListener(
						"secondaryTilesCreated",
						updateTextareasAndSelects
					);
				});
			</script>

			<!-- Event-Handler f√ºr Aircraft ID Formatierung -->
			<script>
				// Zentrale Aircraft ID Formatierung
				function setupAircraftIdFormatting() {
					document
						.querySelectorAll('input[id^="aircraft-"]')
						.forEach((input) => {
							input.addEventListener("input", function (e) {
								formatAircraftId(e.target);
								// KORREKTUR: Aircraft ID Change Handler hinzuf√ºgen
								if (
									window.hangarEvents &&
									window.hangarEvents.handleAircraftIdChange
								) {
									window.hangarEvents.handleAircraftIdChange(
										e.target.id,
										e.target.value
									);
								}
							});

							input.addEventListener("blur", function (e) {
								formatAircraftId(e.target);
								// KORREKTUR: Aircraft ID Change Handler auch bei blur hinzuf√ºgen
								if (
									window.hangarEvents &&
									window.hangarEvents.handleAircraftIdChange
								) {
									window.hangarEvents.handleAircraftIdChange(
										e.target.id,
										e.target.value
									);
								}
							});
						});
				}

				// Formatierung: Erster Buchstabe + Bindestrich + Rest in Gro√übuchstaben
				function formatAircraftId(input) {
					let value = input.value.trim();
					if (value.length === 0) return;

					// Entferne alle Bindestriche und konvertiere zu Gro√übuchstaben
					let cleanValue = value.replace(/-/g, "").toUpperCase();

					if (cleanValue.length > 0) {
						// Erster Buchstabe + Bindestrich + Rest
						let formatted = cleanValue.charAt(0);
						if (cleanValue.length > 1) {
							formatted += "-" + cleanValue.substring(1);
						}

						input.value = formatted;
					}
				}
			</script>

			<!-- Event-Handler f√ºr Towing-Status Dropdowns -->
			<script>
				// Zentrale Towing-Status Verwaltung
				function setupTowStatusHandlers() {
					document
						.querySelectorAll(".tow-status-selector")
						.forEach((select) => {
							// Initial Status-Farbe setzen
							updateTowStatusStyles(select);

							// Event-Listener f√ºr √Ñnderungen
							select.addEventListener("change", function () {
								updateTowStatusStyles(this);
							});
						});
				}

				// Funktion zum Aktualisieren der Towing-Status-Farben
				function updateTowStatusStyles(select) {
					// Alle Styling-Klassen entfernen
					select.classList.remove(
						"tow-neutral",
						"tow-initiated",
						"tow-ongoing",
						"tow-on-position"
					);

					// Neue Styling-Klasse basierend auf dem Wert hinzuf√ºgen
					const value = select.value;
					select.classList.add(`tow-${value}`);

					// Optional: Hintergrundfarbe direkt setzen
					if (value === "neutral") {
						select.style.backgroundColor = "white";
						select.style.color = "#333333";
					} else if (value === "initiated") {
						select.style.backgroundColor = "#FEF3C7"; // Hellgelb
						select.style.color = "#92400E";
					} else if (value === "ongoing") {
						select.style.backgroundColor = "#DBEAFE"; // Hellblau
						select.style.color = "#1E40AF";
					} else if (value === "on-position") {
						select.style.backgroundColor = "#D1FAE5"; // Hellgr√ºn
						select.style.color = "#065F46";
					}
				}

				// Verwende zentrale Initialisierung
				window.hangarInitQueue = window.hangarInitQueue || [];
				window.hangarInitQueue.push(function () {
					// Initial ausf√ºhren
					setupTowStatusHandlers();

					// Aircraft ID Formatierung einrichten
					setupAircraftIdFormatting();

					// Auch bei UI-Updates ausf√ºhren
					document.addEventListener("secondaryTilesCreated", function () {
						setupTowStatusHandlers();
						setupAircraftIdFormatting();
					});

					// Mit Verz√∂gerung nochmal ausf√ºhren, um dynamisch erstellte Elemente zu erfassen
					setTimeout(function () {
						setupTowStatusHandlers();
						setupAircraftIdFormatting();
					}, 500);
				});
			</script>

			<!-- Debug Script f√ºr Position-Klon-Problem -->
			<!-- OPTIMIERT: debug-position-clone.js entfernt -->

			<!-- Display Options Script -->
			<script src="js/display-options.js"></script>

			<!-- DEBUG: Uncomment for debugging Display Options -->
			<!-- <script src="js/debug/display-options-debug.js"></script> -->

			<!-- TEMPORARY: Test script for Flight API Integration -->
			<script src="test-flight-api-integration.js"></script>
			<!-- Quick verification test -->
			<script src="test-quick-verification.js"></script>

			<!-- Zentrale Initialisierung - ersetzt alle separaten DOMContentLoaded Events -->
			<script>
				// Zentrale Initialisierungsqueue um Browser-√úberlastung zu vermeiden
				window.hangarInitQueue = window.hangarInitQueue || [];

				// Einzelne zentrale Initialisierung statt 26 separate DOMContentLoaded Events
				document.addEventListener("DOMContentLoaded", function () {
					console.log("üöÄ Starte zentrale Hangar-Initialisierung...");

					// Sequential execution statt parallel um Browser-√úberlastung zu vermeiden
					let initIndex = 0;

					function executeNextInit() {
						if (initIndex < window.hangarInitQueue.length) {
							try {
								console.log(
									`üìã F√ºhre Initialisierung ${initIndex + 1}/${
										window.hangarInitQueue.length
									} aus`
								);
								window.hangarInitQueue[initIndex]();
								initIndex++;
								// Kleine Verz√∂gerung zwischen Initialisierungen um Browser zu entlasten
								setTimeout(executeNextInit, 10);
							} catch (error) {
								console.error(
									`‚ùå Fehler bei Initialisierung ${initIndex + 1}:`,
									error
								);
								initIndex++;
								setTimeout(executeNextInit, 10);
							}
						} else {
							console.log("‚úÖ Zentrale Hangar-Initialisierung abgeschlossen");

							// FINAL: modeToggle Status korrigieren nach vollst√§ndiger Initialisierung
							setTimeout(() => {
								const modeToggle = document.getElementById("modeToggle");
								const body = document.body;
								if (modeToggle && body) {
									const isEditMode = body.classList.contains("edit-mode");
									modeToggle.checked = isEditMode;
									console.log(
										`üéõÔ∏è modeToggle Status korrigiert: ${
											isEditMode ? "Edit" : "View"
										}-Modus`
									);
								}
							}, 100);
						}
					}

					// Starte sequentielle Ausf√ºhrung
					executeNextInit();
				});
			</script>

			<!-- Zeit-Update Script f√ºr Info Widget -->
			<script>
				// Zeit-Update Funktionen f√ºr Info Widget
				function updateTimeDisplay() {
					const now = new Date();

					// Lokale Zeit formatieren (ohne Sekunden)
					const localTime = now.toLocaleTimeString("de-DE", {
						hour: "2-digit",
						minute: "2-digit",
					});

					// UTC Zeit formatieren (ohne Sekunden)
					const utcTime = now.toUTCString().split(" ")[4].substring(0, 5); // Extrahiere HH:MM

					// DOM Elemente aktualisieren
					const localTimeElement = document.getElementById("local-time");
					const utcTimeElement = document.getElementById("utc-time");

					if (localTimeElement) {
						localTimeElement.textContent = localTime;
					}

					if (utcTimeElement) {
						utcTimeElement.textContent = utcTime;
					}
				}

				// DEAKTIVIERT: Master/Slave Status Update Funktion
				// Diese Funktion wurde durch SharingManager.updateAllSyncDisplays() ersetzt
				function updateSyncModeDisplay() {
					// ‚ö†Ô∏è OBSOLET: Diese Funktion wird nicht mehr verwendet
					// Status-Updates erfolgen jetzt zentral √ºber SharingManager
					console.warn(
						"‚ö†Ô∏è updateSyncModeDisplay() ist obsolet - verwende SharingManager.updateAllSyncDisplays()"
					);
					return;
				}

				// Zeit-Update zur zentralen Initialisierung hinzuf√ºgen
				window.hangarInitQueue = window.hangarInitQueue || [];
				window.hangarInitQueue.push(function () {
					// Sofort einmal ausf√ºhren
					updateTimeDisplay();
					// ENTFERNT: updateSyncModeDisplay() - wird jetzt zentral von SharingManager verwaltet

					// Dann jede Minute aktualisieren (weniger h√§ufig f√ºr Zeit ohne Sekunden)
					setInterval(updateTimeDisplay, 60000);

					// ENTFERNT: Event-Listener f√ºr Sync-Toggle
					// Toggle-Events werden jetzt direkt vom SharingManager verwaltet
					// const liveSyncToggle = document.getElementById("liveSyncToggle");
					// if (liveSyncToggle) {
					//     liveSyncToggle.addEventListener("change", updateSyncModeDisplay);
					// }

					console.log(
						"‚è∞ Zeit-Anzeige im Info Widget initialisiert (Sync-Status wird von SharingManager verwaltet)"
					);
				});
			</script>
		</div>

		<!-- Flight Data Status Display -->
		<script src="js/flight-data-status.js"></script>
	</body>
</html>
